<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  <title>ZOJ month contest D.Determinant and Matrix | Kevin&#39;s Home</title>
  <meta name="description" content="{{theme.description}}" />
  <meta name="keywords" content="{{theme.keywords}}" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Time Limit: 2 Seconds      Memory Limit: 65536 KB


##DescriptionRecently, LBH is learning the curse linear algebra. Thus he is very interested in matrix and determinant now. In order to practice his">
<meta property="og:type" content="article">
<meta property="og:title" content="ZOJ month contest D.Determinant and Matrix">
<meta property="og:url" content="http://sfork.coding.me/2014/11/07/zoj-month-contest-d-determinant-and-matrix/index.html">
<meta property="og:site_name" content="Kevin's Home">
<meta property="og:description" content="Time Limit: 2 Seconds      Memory Limit: 65536 KB


##DescriptionRecently, LBH is learning the curse linear algebra. Thus he is very interested in matrix and determinant now. In order to practice his">
<meta property="og:image" content="http://acm.zju.edu.cn/onlinejudge/showImage.do?name=DeterminantAndMatrixFig1.png">
<meta property="og:image" content="http://acm.zju.edu.cn/onlinejudge/showImage.do?name=DeterminantAndMatrixFig2.png">
<meta property="og:image" content="http://acm.zju.edu.cn/onlinejudge/showImage.do?name=DeterminantAndMatrixFig3.png">
<meta property="og:image" content="http://acm.zju.edu.cn/onlinejudge/showImage.do?name=DeterminantAndMatrixFig4.png">
<meta property="og:updated_time" content="2015-02-26T03:05:38.050Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ZOJ month contest D.Determinant and Matrix">
<meta name="twitter:description" content="Time Limit: 2 Seconds      Memory Limit: 65536 KB


##DescriptionRecently, LBH is learning the curse linear algebra. Thus he is very interested in matrix and determinant now. In order to practice his">
<meta name="twitter:image" content="http://acm.zju.edu.cn/onlinejudge/showImage.do?name=DeterminantAndMatrixFig1.png">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="https://fonts.googleapis.com/css?family=Inconsolata|Titillium+Web" rel="stylesheet">
  <link rel="stylesheet" href="/style.css">
  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>
</head>

<body>

  <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>

  <script>setLoadingBarProgress(20)</script>

  <div id="site-wrapper">

    <header id="header">
	<div id="header-wrapper" class="clearfix">
		<a id="logo" href="/">
			Kevin's Home
		</a>
		<button id="site-nav-switch">
	    <span class="icon icon-menu"></span>
	  </button>
	</div>
	<aside id="site-menu">
  	<nav>
  		
        <a href="/" class="nav-home nav">
          Home
        </a>
      
        <a href="/about" class="nav-about nav">
          About
        </a>
      
        <a href="/archives" class="nav-archives nav">
          Archives
        </a>
      
    </nav>
	</aside>
</header>

    <script>setLoadingBarProgress(40);</script>

    <main id="main" role="main">
      <article id="post-zoj-month-contest-d-determinant-and-matrix"
  class="post article white-box article-type-post"
  itemscope itemprop="blogPost">
	<h2 class="title">
  	<a href="/2014/11/07/zoj-month-contest-d-determinant-and-matrix/">
    	ZOJ month contest D.Determinant and Matrix
    </a>
  </h2>
	<time>
	  11月 7, 2014
	</time>
	<section class="content">
  	<div class="article-entry" itemprop="articleBody">
    	<hr>
<center style="color: #000000;"><span style="color: green;">Time Limit: </span>2 Seconds      <span style="color: green;">Memory Limit: </span>65536 KB</center>

<hr>
<p>##Description<br>Recently, LBH is learning the curse linear algebra. Thus he is very interested in matrix and determinant now. In order to practice his ability of solving the problem of linear algebra, he just invent some problems by himself. Once the problems was create, he would solve it immediately. However, he meet a problem that was so hard that he couldn’t work out even though racked his brains. The problem was described as follow:</p>
<p>To a integer martix M<sub>nn</sub>(a<sub>ij</sub>), we define two function add(M<sub>nn</sub>(a<sub>ij</sub>))=M<sub>nn</sub>(a<sub>ij</sub> + 1) and sub(M<sub>nn</sub>(a<sub>ij</sub>))=M<sub>nn</sub>(a<sub>ij</sub> - 1) which were exactly like this:<br><a id="more"></a></p>
<div style="color: #000000;"><img src="http://acm.zju.edu.cn/onlinejudge/showImage.do?name=DeterminantAndMatrixFig1.png" alt="DeterminantAndMatrixFig1"></div><br><div style="color: #000000;"><img src="http://acm.zju.edu.cn/onlinejudge/showImage.do?name=DeterminantAndMatrixFig2.png" alt="DeterminantAndMatrixFig2"></div>

<p>According to the martix M<sub>nn</sub>(a<sub>ij</sub>), we can permutate it and get a full permutation set Perm(M<sub>nn</sub>(a<sub>ij</sub>)) = {M<sub>nn</sub>(a<sub>I<sub>i</sub>J<sub>j</sub></sub>)| I and J is a permutation of 1..n }, (Perm(M) is a set, each matrix in Perm(M) is unique). For example:</p>
<div style="color: #000000;"><img src="http://acm.zju.edu.cn/onlinejudge/showImage.do?name=DeterminantAndMatrixFig3.png" alt="DeterminantAndMatrixFig3"></div>

<p>The problem is to get the result of a fomula about an integer matrix M<sub>nn</sub>:</p>
<p><div style="color: #000000;"><img src="http://acm.zju.edu.cn/onlinejudge/showImage.do?name=DeterminantAndMatrixFig4.png" alt="DeterminantAndMatrixFig4"></div><br><span style="color: #000000;">in which the det(M) meaned to cacluate the determinant of M.</span></p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>There are several test cases.</p>
<p>The first line contains an integer <var>T</var>(<var>T</var> ≤ 100) . Then <var>T</var> test cases follow.</p>
<p>In each test case, the first line contains one integer <var>n</var>(0&lt; <var>n</var>≤ 10). The number means the giving matrix’s size is <var>n×n</var></p>
<p>Then there are <var>n</var> lines followed, each line contains <var>n</var> integers <var>a<sub>ij</sub></var>(-10≤ <var>a<sub>ij</sub></var>≤ 10), in the position row <var>i</var>, colum <var>j</var>, it represents the number <var>a<sub>ij</sub>.</var></p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>For each test case, since the result may be very large, output one line with the result modulo 2<sup>30</sup>.</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">1</div><div class="line">2</div><div class="line">1 1</div><div class="line">1 2</div></pre></td></tr></table></figure>
<h4 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">2</div></pre></td></tr></table></figure>
<p><span style="color: #000000;">Author: </span><strong>LIN, Binghui</strong><br><span style="color: #000000;">Source: </span><strong>ZOJ Monthly, August 2014</strong></p>
<p><br></p>
<hr>
<p>这道题全场现场只A了一个人。今天我们比赛的时候我A了，挺爽的。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.Scanner;</div><div class="line"><span class="keyword">import</span> java.math.*;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</div><div class="line">	<span class="keyword">static</span> <span class="keyword">long</span> fact[]=<span class="keyword">new</span> <span class="keyword">long</span>[<span class="number">15</span>];</div><div class="line">	<span class="keyword">static</span> <span class="keyword">long</span> kind;</div><div class="line">	<span class="keyword">static</span> <span class="keyword">int</span> A[][]=<span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>][<span class="number">10</span>];</div><div class="line">	<span class="keyword">static</span> <span class="keyword">final</span> BigInteger MOD=BigInteger.valueOf(<span class="number">1</span>&amp;lt;&amp;lt;<span class="number">30</span>);</div><div class="line">	<span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getKind</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</div><div class="line">		<span class="keyword">boolean</span> mark[]=<span class="keyword">new</span> <span class="keyword">boolean</span>[<span class="number">10</span>];</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i,j,k,r=<span class="number">0</span>;r&amp;lt;<span class="number">2</span>;r++)&#123;</div><div class="line">			<span class="keyword">for</span> (i = <span class="number">0</span>; i &amp;lt; n; ++ i) mark[i] = <span class="keyword">false</span>;</div><div class="line">			<span class="keyword">for</span> (i = <span class="number">0</span>; i &amp;lt; n; ++ i) &#123;</div><div class="line">				<span class="keyword">if</span> (mark[i]) <span class="keyword">continue</span>;</div><div class="line">				<span class="keyword">int</span> cnt = <span class="number">0</span>;</div><div class="line">				<span class="keyword">for</span> (j = i; j &amp;lt; n; ++ j) &#123;</div><div class="line">					<span class="keyword">for</span> (k = <span class="number">0</span>; k &amp;lt; n; ++ k) &#123;</div><div class="line">						<span class="keyword">if</span> (r==<span class="number">1</span>&amp;amp;&amp;amp;A[k][i] != A[k][j])<span class="keyword">break</span>;</div><div class="line">						<span class="keyword">if</span>(r==<span class="number">0</span>&amp;amp;&amp;amp;A[i][k] != A[j][k])<span class="keyword">break</span>;</div><div class="line">					&#125;</div><div class="line">					<span class="keyword">if</span> (k == n) &#123;</div><div class="line">						++ cnt;</div><div class="line">						mark[j] = <span class="keyword">true</span>;</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">				kind /= fact[cnt];</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">		Scanner cin=<span class="keyword">new</span> Scanner(System.in);</div><div class="line">		<span class="keyword">int</span> n,T=cin.nextInt();</div><div class="line">		fact[<span class="number">0</span>]=<span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&amp;lt;=<span class="number">10</span>;i++)fact[i]=fact[i-<span class="number">1</span>]*i;</div><div class="line">		<span class="keyword">while</span>(T--&amp;gt;<span class="number">0</span>)&#123;</div><div class="line">			n=cin.nextInt();</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&amp;lt;n;i++)&#123;</div><div class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&amp;lt;n;j++)&#123;</div><div class="line">					A[i][j]=cin.nextInt();</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">long</span> res=<span class="number">0</span>;</div><div class="line">			Matrix matrix=<span class="keyword">new</span> Matrix(n);</div><div class="line">			kind=fact[n]*fact[n];</div><div class="line">			getKind(n);</div><div class="line">			<span class="keyword">if</span>(kind%<span class="number">2</span>==<span class="number">1</span>)&#123;</div><div class="line">				matrix.valueOf(A, <span class="number">0</span>);</div><div class="line">				res=res ^(matrix.Det().mod(MOD).longValue());</div><div class="line">			&#125;</div><div class="line">			matrix.valueOf(A, <span class="number">1</span>);</div><div class="line">			res=res^(matrix.Det().mod(MOD).longValue());</div><div class="line">			matrix.valueOf(A, -<span class="number">1</span>);</div><div class="line">			res=res^(matrix.Det().mod(MOD).longValue());</div><div class="line">			System.out.println(res);</div><div class="line">		&#125;</div><div class="line">		cin.close();</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Matrix</span></span>&#123;</div><div class="line">	BigInteger M[][]=<span class="keyword">new</span> BigInteger[<span class="number">10</span>][<span class="number">10</span>];</div><div class="line">	BigInteger ZERO,ONE;</div><div class="line">	<span class="keyword">int</span> n;</div><div class="line">	Matrix(<span class="keyword">int</span> n)&#123;</div><div class="line">		<span class="keyword">this</span>.n=n;</div><div class="line">		ZERO=BigInteger.ZERO;</div><div class="line">		ONE=BigInteger.ONE;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">valueOf</span><span class="params">(<span class="keyword">int</span> A[][],<span class="keyword">int</span> d)</span></span>&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&amp;lt;n;i++)&#123;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&amp;lt;n;j++)&#123;</div><div class="line">				M[i][j]=BigInteger.valueOf(A[i][j]+d);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function">BigInteger <span class="title">Det</span><span class="params">()</span></span>&#123;</div><div class="line">		BigInteger tmp, res = ONE, div = ONE;</div><div class="line">		<span class="keyword">int</span> i, j, k;</div><div class="line">		<span class="keyword">for</span> (i = <span class="number">0</span>; i &amp;lt; n; ++ i) &#123;</div><div class="line">			<span class="keyword">for</span> (j = i; j &amp;lt; n; ++ j) &#123;</div><div class="line">				<span class="keyword">if</span> (!M[j][i].equals(ZERO)) <span class="keyword">break</span>;</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">if</span> (j == n) <span class="keyword">return</span> ZERO;</div><div class="line">			<span class="keyword">if</span> (j != i) &#123;</div><div class="line">				<span class="comment">//res = res.negate();</span></div><div class="line">				<span class="keyword">for</span> (k = <span class="number">0</span>; k &amp;lt; n; ++ k) &#123;</div><div class="line">				    tmp = M[j][k];</div><div class="line">					M[j][k] = M[i][k];</div><div class="line">					M[i][k] = tmp;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			res = res.multiply(M[i][i]);</div><div class="line">			<span class="keyword">for</span> (j = i + <span class="number">1</span>; j &amp;lt; n; ++ j) &#123;</div><div class="line">				<span class="keyword">if</span> (M[j][i].equals(ZERO)) <span class="keyword">continue</span>;</div><div class="line">				div = div.multiply(M[i][i]);</div><div class="line">				<span class="keyword">for</span> (k = i + <span class="number">1</span>; k &amp;lt; n; ++ k) &#123;</div><div class="line">					M[j][k] = M[j][k].multiply(M[i][i]).subtract(M[i][k].multiply(M[j][i]));</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		res = res.divide(div);</div><div class="line">		<span class="keyword">if</span> (res.compareTo(ZERO) &amp;lt; <span class="number">0</span>) res = res.negate();</div><div class="line">		<span class="keyword">return</span> res;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p></p>

  	</div>
	  
	  <div class="article-tags tags">
		  
        <a class="tag-link" href="/tags/数论/">数论</a>
      
	  </div>
	</section>
</article>


<section id="comments">
	<div id="disqus_thread"></div>
</section>


      <script>setLoadingBarProgress(60);</script>
    </main>

    <footer id="footer" class="clearfix">
  
  
	<div class="search">
	  <form name="searchform" id="searchform" class="u-search-form">
	    <input type="text" id="searchinput" class="u-search-input" placeholder="Looking for something?" />
	    <button type="submit" id="u-search-btn-submit" class="u-search-btn-submit">
	      <span class="icon icon-search"></span>
	    </button>
	  </form>
	</div>
	

	<div class="social-wrapper">
  	
      
        <a href="https://github.com/stkevintan" class="social github"
          target="_blank" rel="external">
          <span class="icon icon-github"></span>
        </a>
      
        <a href="https://twitter.com/kevinclasky" class="social twitter"
          target="_blank" rel="external">
          <span class="icon icon-twitter"></span>
        </a>
      
        <a href="/atom.xml" class="social rss"
          target="_blank" rel="external">
          <span class="icon icon-rss"></span>
        </a>
      
    
  </div>
  
  <div>Theme <span class="codename">Typescript</span> designed by <a href="http://rakugaki.me/" target="_blank">Art Chen</a>.</div>
  <div>&copy; <a href="/">Kevin&#39;s Home</a></div>
  
</footer>


    <script>setLoadingBarProgress(80);</script>

  </div>

  
<script>
  var disqus_shortname = 'kevinhome';
  
  var disqus_url = 'http://sfork.coding.me/2014/11/07/zoj-month-contest-d-determinant-and-matrix/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script>window.jQuery || document.write('<script src="/js/jquery.min.js"><\/script>')</script>

<script src="/js/jquery.fitvids.js"></script>
<script>
	var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
	var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
	var ALGOLIA_API_KEY = "";
	var ALGOLIA_APP_ID = "";
	var ALGOLIA_INDEX_NAME = "";
  var AZURE_SERVICE_NAME = "";
  var AZURE_INDEX_NAME = "";
  var AZURE_QUERY_KEY = "";
  var BAIDU_API_ID = "";
  var SEARCH_SERVICE = "hexo";
</script>
<script src="/js/search.js"></script>
<script src="/js/app.js"></script>


  <script>setLoadingBarProgress(100);</script>

</body>
</html>
